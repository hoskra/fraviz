<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fraviz</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
    <style>
      *, *:before, *:after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: monospace;
      }
    </style>
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
      crossorigin="anonymous"></script>
  </head>
  <body>

    <div class="gui" id="no-song">
      <span>Please log in and play a song with Spotify!</span>
    </div>

    <div class="gui" id="mode">
      <button id="2">2</button><button id="3">3</button><button id="4">4</button><button id="5">5</button>
    </div>

    <div class="gui" id="stats">
      <div id="stats-table">
        Loading ...
      </div>
      <span class="stat-explanation">
        <a href="https://developer.spotify.com/documentation/web-api/reference/tracks/get-audio-features/" target="_blank">stat explanation</a>
      </span>
    </div>

    <div class="gui" id="song">
      <span id="song-artist"></span>
      <span id="song-name"></span>
    </div>

    <div class="gui" id="about">
      <span class="site-name">fraviz</span>
      <span class="repo"><a target="_blank" href="https://github.com/hoskra/fraviz">about</a></span>
    </div>

    <noscript>Oops! JavaScript is required to run this page.</noscript>
    <script type="x-shader/x-vertex" id="vertexShader">

      varying vec3 vWorldPosition;

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }

    </script>

    <script type="x-shader/x-fragment" id="fragmentShader">

      uniform vec3 topColor;
      uniform vec3 bottomColor;
      uniform float offset;
      uniform float exponent;

      varying vec3 vWorldPosition;

      void main() {

        float h = normalize( vWorldPosition + offset ).y;
        gl_FragColor = vec4( mix( bottomColor, topColor, max( pow( max( h , 0.0), exponent ), 0.0 ) ), 1.0 );

      }

    </script>
  </body>
</html>